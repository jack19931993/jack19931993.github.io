function initializeRoundTrip(t){var a,e=moment().add("330","days"),n=moment(),l=$("#"+t+"DepartureDate"),o=$("#"+t+"ReturnDate"),i=moment(l.prop("value")).format("MM/DD/YYYY"),r=moment(o.prop("value")).format("MM/DD/YYYY"),D=null,m=moment(l.prop("value")),d=moment(o.prop("value"));"Invalid date"===i&&(i=null),"Invalid date"===r&&(r=null);var s=function(){m&&d&&m.hasOwnProperty("_isAMomentObject")&&d.hasOwnProperty("_isAMomentObject")&&(m.isValid()?(a.config.startDate=m.clone(),D.config.startDate=m.clone(),a.$elem.val(m.format(a.config.format))):(a.config.startDate=null,D.config.startDate=null,a.globals.startSelected=!1,D.globals.startSelected=!1,a.$elem.val("")),d.isValid()?(a.config.endDate=d.clone(),D.config.endDate=d.clone(),D.$elem.val(d.format(D.config.format))):(a.config.endDate=null,D.config.endDate=null,a.globals.endSelected=!1,D.globals.endSelected=!1,D.$elem.val("")))},Y=function(t,e){m=e,d.isValid()&&d<m&&(d=moment("")),s(),t.hideDropdown(),D.showDropdown()};l.caleran({minDate:n,maxDate:e,showFooter:!1,startDate:i?m:"",startSelected:!!i,endDate:r?d:"",endSelected:!!r,autoAlign:!1,locale:$("html").attr("lang"),format:"MM/DD/YYYY",oninit:function(t){t.globals.delayInputUpdate=!0,t.$elem.val(i),a=t},ondraw:function(t){if(t.globals.initComplete){t.updateHeader(),m=moment(a.$elem.val()),d=moment(D.$elem.val());var e=displayDate=!1;m.isValid()||(t.config.startDate=null),d.isValid()||(t.config.endDate=null),m.isValid()&&null!=t.config.startDate&&t.config.startDate.format("MM/DD/YYYY")!=m.format("MM/DD/YYYY")&&(t.config.startDate=m.clone(),displayDate=m.clone().startOfMonth().format("MM/DD/YYYY"),e=!0),d.isValid()&&null!=t.config.endDate&&t.config.endDate.format("MM/DD/YYYY")!=d.format("MM/DD/YYYY")&&(t.config.endDate=d.clone(),m.isValid()||(displayDate=d.clone().startOfMonth().format("MM/DD/YYYY"),e=!0)),e&&(displayDate?t.setDisplayDate(displayDate):t.reDrawCells())}},onfirstselect:Y,onbeforeselect:Y}),o.caleran({minDate:n,maxDate:e,showFooter:!1,startDate:i?m:null,startSelected:!!i,endDate:r?d:null,endSelected:!!r,showOn:"bottom-right",locale:$("html").attr("lang"),format:"MM/DD/YYYY",oninit:function(t){t.globals.delayInputUpdate=!0,t.$elem.val(r),D=t},ondraw:function(t){if(t.updateHeader(),t.globals.initComplete){m=moment(a.$elem.val()),d=moment(D.$elem.val());var e=displayDate=!1;m.isValid()||(t.config.startDate=null),d.isValid()||(t.config.endDate=null),m.isValid()&&null!=t.config.startDate&&t.config.startDate.format("MM/DD/YYYY")!=m.format("MM/DD/YYYY")&&(t.config.startDate=m.clone(),d.isValid()||(displayDate=m.clone().startOfMonth().format("MM/DD/YYYY"),e=!0)),d.isValid()&&null!=t.config.endDate&&t.config.endDate.format("MM/DD/YYYY")!=d.format("MM/DD/YYYY")&&(t.config.endDate=d.clone(),displayDate=d.clone().startOfMonth().format("MM/DD/YYYY"),e=!0),e&&(displayDate?t.setDisplayDate(displayDate):t.reDrawCells())}},onfirstselect:function(t,e){d=e,m.isValid()&&d<m&&(m=moment("")),s(),t.hideDropdown(),m.isValid()||a.showDropdown()}})}$(document).ready(function(){initializeRoundTrip("Fare"),initializeRoundTrip("Builder"),initializeRoundTrip("Group"),$(".multi-date").each(function(){var t=$(this),e=moment(t.prop("value")).format("MM/DD/YYYY");"Invalid date"===e&&(e=""),t.caleran({singleDate:!0,autoCloseOnSelect:!0,minDate:moment(),maxDate:moment().add("330","days"),startDate:"",showFooter:!1,startEmpty:!0,showOn:"bottom-right",locale:$("html").attr("lang"),format:"MM/DD/YYYY",oninit:function(t){t.$elem.val(e)},onafterselect:function(t,e,a){var n=t.$elem.parents(".multi-segment-row").next(".multi-segment-row").find(".multi-date");n.val()||n.val(moment(e).format("MM/DD/YYYY"))}})})});