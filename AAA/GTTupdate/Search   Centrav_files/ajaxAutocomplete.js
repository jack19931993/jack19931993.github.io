var fancyAirline=function(t){return t.id?'<img src="//s3.amazonaws.com/managedtrip/airlineLogos/70px/'+t.id+'.png" style="width:20px;height:20px;">&nbsp;&nbsp;'+t.text:t.text},processCountryResults=function(t){var e=[];for(var a in t)e.push({id:a,text:t[a]});return{results:e}},addSelectOption=function(t,e,a){a=!!a,(t=jQuery(t)).append(jQuery('<option value="'+e.value+'" '+(a?'selected="selected"':"")+"  > "+e.label+" </option>"))};function initializeSelect2Ajax(r){var t=void 0,e=void 0,a=void 0,n=void 0,i=void 0;r.attr("data-template-result-function")&&(t=window[r.attr("data-template-result-function")]),r.attr("data-template-selection-function")&&(e=window[r.attr("data-template-selection-function")]),r.attr("placeholder")&&(a=r.attr("placeholder")),r.attr("allowClear")&&(n=!0,a=a||""),r.attr("data-dropdown-parent")&&(i=r.attr("bug-dropdown-parent")),r.select2({ajax:{url:function(t){return $(this).attr("data-search-uri")},data:function(t){return{query:t.term}},dataType:"json",processResults:function(t){if(this.$element.attr("data-process-results-function"))return window[this.$element.attr("data-process-results-function")](t);for(var e in t)t[e].id=t[e][this.$element.attr("data-id-key")],t[e].text=t[e][this.$element.attr("data-text-key")];return{results:t}}},width:"100%",templateResult:e,templateSelection:t,minimumInputLength:2,placeholder:a,allowClear:n,dropdownParent:i,theme:"bootstrap",containerCssClass:":all:",escapeMarkup:function(t){return t}});var o=r.attr("data-initial-values");if(o){o=r.attr("multiple")?o.split(","):[o];var l={};l[r.attr("data-id-key")]=o;try{$.ajax({type:"get",url:r.attr("data-initial-uri"),data:l,dataType:"json",async:!1,success:function(t){var e;for(var a in o)void 0!==t[o[a]]?(r.attr("data-process-results-function")?e={id:o[a],text:t[o[a]]}:((e=t[o[a]]).id=e[r.attr("data-id-key")],e.text=e[r.attr("data-text-key")]),r.select2("trigger","select",{data:e})):console.error("Select2 initial value , "+o[a]+" , not found. ")},error:function(t,e){if(404!=t.status||!r.attr("data-add-dynamic-input")||"true"!=r.attr("data-add-dynamic-input"))throw t.status+" - "+e;for(var a in o)r.select2("trigger","select",{data:{id:o[a],text:o[a]}})}})}catch(t){console.error(t)}}}$(document).ready(function(){$(".ajax-autocomplete").each(function(){initializeSelect2Ajax($(this))})});