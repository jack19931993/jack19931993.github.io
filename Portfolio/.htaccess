RewriteEngine on

RewriteRule ^enqury_gw.html(.*) enqury_gw.php$1 [L]
RewriteRule ^cart.html(.*) cart.php$1 [L]
RewriteRule ^index.html index.php [L]
RewriteRule ^introduction.html introduction.php [L]
RewriteRule ^contact.html contact.php [L]
RewriteRule ^contactend.html contactend.php [L]
RewriteRule ^contact_(.+).html contact.php?pdid=$1 [L]
RewriteRule ^links_(.+)_([0-9]*).html links.php?id=$1&page=$2 [L]
RewriteRule ^linkex.html linkex.php [L]
RewriteRule ^info_(.+)_([0-9]*).html info.php?id=$1&page=$2 [L]
RewriteRule ^infodetail_([0-9]*).html infodetail.php?id=$1 [L]
RewriteRule ^sitemap.html sitemap.php [L]
RewriteRule ^products.html products.php [L]
RewriteRule ^sitemap.xml xml.php [L]
RewriteRule ^rss.xml rss.php [L]
#RewriteRule (.+).html extra.php?q=$1 [L]
RewriteRule (.+)_([0-9]*).html catalog.php?q=$1&page=$2 [L]
RewriteRule (.+).html catalog.php?q=$1 [L]
RewriteRule ^([^\/]+).jpg catalog.php?q=$1.jpg [L]

######add by tiwi----------

SetEnvIfNoCase User-Agent "^Wget" bad_bot
<Limit GET POST>
Order Allow,Deny
Allow from all
Deny from env=bad_bot
</Limit>

#------------------------

#取消ETag功能
Header unset ETag
FileETag None
 
#設定檔案過期時間
<IfModule mod_expires.c>
#要設定的檔案類型
<FilesMatch ".(ico|pdf|flv|jpg|jpeg|png|gif|js|css|swf|gz|svg|mp4|xml|htm|html|woff)$">
ExpiresActive On
#604800秒=1週
ExpiresDefault A604800
</FilesMatch>
</IfModule>
 
#設定檔案快取時間
<IfModule mod_headers.c>
#要設定的檔案類型
<FilesMatch ".(ico|pdf|flv|jpg|jpeg|png|gif|js|css|swf|gz|svg|mp4|xml|htm|html|woff)$">
#604800秒=1週
Header set Cache-Control "max-age=604800, public"
</FilesMatch>
</IfModule>
 
#壓縮JS和CSS檔
<IfModule mod_deflate.c>
<FilesMatch ".(ico|pdf|flv|jpg|jpeg|png|gif|js|css|swf|gz|svg|mp4|xml|htm|html|woff)$">
SetOutputFilter DEFLATE
</FilesMatch>
</IfModule>

<IfModule mod_deflate.c>
# Insert filters
AddOutputFilterByType DEFLATE text/plain
AddOutputFilterByType DEFLATE text/html
AddOutputFilterByType DEFLATE text/xml
AddOutputFilterByType DEFLATE text/css
AddOutputFilterByType DEFLATE application/xml
AddOutputFilterByType DEFLATE application/xhtml+xml
AddOutputFilterByType DEFLATE application/rss+xml
AddOutputFilterByType DEFLATE application/javascript
AddOutputFilterByType DEFLATE application/x-javascript
AddOutputFilterByType DEFLATE application/x-httpd-php
AddOutputFilterByType DEFLATE application/x-httpd-fastphp
AddOutputFilterByType DEFLATE image/svg+xml

# Drop problematic browsers
BrowserMatch ^Mozilla/4 gzip-only-text/html
BrowserMatch ^Mozilla/4\.0[678] no-gzip
BrowserMatch \bMSI[E] !no-gzip !gzip-only-text/html

# Make sure proxies don't deliver the wrong content
Header append Vary User-Agent env=!dont-vary
</IfModule>
